<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="dynamicloader.js" type="text/javascript"></script>
    <script>
        window.addEventListener("DOMContentLoaded",function(){
            dl.use.all(["d3","jasmine"]);
            dl.addTagBoth("https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/core/main.min.set");
            dl.addTagBoth("https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/4.2.0/daygrid/main.min.set");
            
        });

        window.addEventListener("load",function(){
            describe("dynamic load", function() {
                it("Jasmine has been loaded correctly", function() {
                    expect(jasmine).not.toBeUndefined();
                });
                it("full calender loaded", function() {
                    var el = document.querySelector("#cal");
                    expect(el).not.toBe(null);
                    let calendar = new FullCalendar.Calendar(el, {
                        plugins: [ "dayGrid" ],
                        defaultView: 'dayGridMonth'
                    });
                    calendar.render();
                });
            });
            describe("ql tool", function() {
                it("single and multi", function() {
                    expect(dl.qs("#cal")).not.toBe(null);
                    expect(dl.qa("#cal").length).toBe(1);
                });
            });
        });

    </script>
</head>
<body>
    <a href='javascript:(function(a){var t={queue:void 0,define:void 0,require:void 0,qs:function(e){return document.querySelector(e)},qa:function(e){var a=document.querySelectorAll(e)||[];return Array.from(a)},addScriptTag:function(e){return new Promise((a,i)=>{if(!this.validURL(e)){var n=`ignored because of the string format is invalid : ${e}`;return console.warn(n),i(n)}var o=document.createElement("script");o.src=e,o.type="text/javascript",o.onload=function(e){var i=t.queue.shift();console.log("loaded :"+this.src),i?(console.log("next :"+i.src),document.head.appendChild(i)):t.queue=void 0,a(this.src)},void 0===this.queue?(this.queue=[],document.head.appendChild(o)):this.queue.push(o)})},addTagBoth:async function(e){var a=e.split("."),t=a.pop();if("js"===t)await this.addScriptTag(e);else if("css"===t)await this.addStyleTag(e);else if("set"===t){var i=a.join(".");this.addStyleTag(i+".css"),await this.addScriptTag(i+".js")}else console.warn(`URL is invalid : ${e}`)},stashRequireJS:function(){t.require=window.require,window.require=void 0,t.define=window.define,window.define=void 0,console.log("disabled RequireJS")},popRequireJS:function(){window.require=t.require,t.require=void 0,window.define=t.define,t.define=void 0,console.log("restored RequireJS")},addStyleTag:function(e){return new Promise((a,t)=>{if(!this.validURL(e)){var i=`Ignored because of the string format is invalid : ${e}`;console.warn(i),t(i)}var n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onload=function(e){console.log("loaded : "+this.href),a(this.href)},document.head.appendChild(n)})},addStyle:function(e){var a=document.createElement("style");a.type="text/css",a.innerHTML=e,document.head.appendChild(a)}};t.use={d3sel:async()=>{await t.addScriptTag("https://d3js.org/d3-selection.v1.min.js")},d3:async()=>{await t.addScriptTag("https://d3js.org/d3.v5.min.js")},icons:async()=>{await t.addStyleTag("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css")},react:async()=>{t.addScriptTag("https://unpkg.com/react@16/umd/react.development.js"),await t.addScriptTag("https://unpkg.com/react-dom@16/umd/react-dom.development.js")},jasmine:async()=>{var e="3.4.0";t.addTagBoth(`https://cdnjs.cloudflare.com/ajax/libs/jasmine/${e}/jasmine.min.set`),t.addScriptTag(`https://cdnjs.cloudflare.com/ajax/libs/jasmine/${e}/jasmine-html.js`),await t.addScriptTag(`https://cdnjs.cloudflare.com/ajax/libs/jasmine/${e}/boot.min.js`)},all:async e=>{for(var a=0;a<e.length;a++){var i=e[a];try{await t.use[i].apply(t)}catch(e){alert("Does not found the specified name : "+i)}}}},t.addStack=function(a){var t=localStorage.getItem("tempURLs");if(t=void 0===t?[]:JSON.parse(t),a instanceof Array)a.forEach(e=>{if(this.validURL(e))t.push(e);else{var a=`Ignored because of the string format is invalid : ${e}`;console.warn(a)}});else{if(!this.validURL(e)){var i=`Ignored because of the string format is invalid : ${e}`;return void console.warn(i)}t.push(a)}localStorage.setItem("tempURLs",JSON.stringify(t))},t.useStack=function(){var e=localStorage.getItem("tempURLs");e=void 0===e?[]:JSON.parse(e);for(var a=0;a<e.length;a++)this.addTagBoth(e[a])},t.clearStack=function(){localStorage.removeItem("tempURLs")},t.validURL=function(e){var a=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!a.test(e)},void 0===window[a]?window[a]=t:console.warn(`Did not assign the variable because of the already exists the global variable that name is ${a}`)})("dl");'>DynamicLoader</a>
    <div id="cal"></div>
</body>
</html>